(function(b){var h={},l=0,i=null,g=function(a){var d=a.target[a.type];if(b.isFunction(d)){var f=b.Event(a.type,{originalEvent:a,ovi:{latitude:a.target.coordinate.latitude,longitude:a.target.coordinate.latitude,map:h[a.target.joviID]},target:a.target});d.call(a.target.jovi,f)}},k=function(a){window.ovi&&window.ovi.mapsapi&&window.ovi.mapsapi.map?a():setTimeout(function(){k(a)},200)},m={center:[29.187778,-82.130556],zoom:10,behavior:!0,zoomBar:!0,scaleBar:!0,overview:!1,viewControl:!0,rightClick:!0,
overlaySelector:!0,typeSelector:!0,searchManager:!1,routingManager:!1},j={init:function(a,d,f){var c=b(this),e=b.extend({},m,a);k(function(){i!==null&&typeof d==="string"&&typeof f==="string"&&(i={appId:d,authenticationToken:f},ovi.mapsapi.util.ApplicationContext.set(i));var a=[],b;e.behavior&&a.push(new ovi.mapsapi.map.component.Behavior);e.zoomBar&&a.push(new ovi.mapsapi.map.component.ZoomBar);e.scaleBar&&a.push(new ovi.mapsapi.map.component.ScaleBar);e.overview&&a.push(new ovi.mapsapi.map.component.Overview);
e.viewControl&&a.push(new ovi.mapsapi.map.component.ViewControl);e.rightClick&&a.push(new ovi.mapsapi.map.component.RightClick);e.overlaySelector&&a.push(new ovi.mapsapi.map.component.OverlaysSelector);e.typeSelector&&a.push(new ovi.mapsapi.map.component.TypeSelector);e.searchManager&&ovi.mapsapi.search.Manager&&(a.push(new ovi.mapsapi.search.component.SearchComponent),a.push(new ovi.mapsapi.search.component.RightClick));e.routingManager&&ovi.mapsapi.routing.Manager&&(ovi.mapsapi.search.Manager&&
a.push(new ovi.mapsapi.routing.component.RouteComponent),a.push(new ovi.mapsapi.routing.component.RightClick));b=c.attr("id");b||(b="jovi"+l++,c.attr("id",b));h[b]=new ovi.mapsapi.map.Display(c[0],{zoomLevel:e.zoom,center:e.center,components:a})})},dropMarker:function(a,d){var f=b(this).attr("id"),c,e={click:[g||b.noop,!1,null],dblclick:[g||b.noop,!1,null],mousemove:[g||b.noop,!1,null],mouseover:[g||b.noop,!1,null],mouseout:[g||b.noop,!1,null],mouseenter:[g||b.noop,!1,null],mouseleave:[g||b.noop,
!1,null],longpress:[g||b.noop,!1,null],dragstart:[g||b.noop,!1,null],drag:[g||b.noop,!1,null],dragend:[g||b.noop,!1,null]};c=b.extend({},{text:"",textColor:"#333333",fill:"#ff6347",stroke:"#333333",shape:"balloon",icon:void 0},d);c.textPen={strokeColor:c.textColor};c.pen={strokeColor:c.stroke};c.brush={color:c.fill};c.jovi=this;c.joviID=f;c.eventListener=e;c.icon?h[f].objects.add(new ovi.mapsapi.map.Marker(a,c)):h[f].objects.add(new ovi.mapsapi.map.StandardMarker(a,c))},showInfoBubble:function(a,
d){var f=b(this).attr("id"),c;c=b.extend({},{content:""},d);if(c.content){if(c.content.jquery)c.content.css("white-space","normal"),c.content=b("<div/>").append(c.content.clone()).html()}else c.content="";(h[f].getComponentById("InfoBubbles")||h[f].addComponent(new ovi.mapsapi.map.component.InfoBubbles)).addBubble(c.content,new ovi.mapsapi.geo.Coordinate(a[0],a[1]))},setCenter:function(a,d){var f=b(this);h[f.attr("id")].setCenter(a,d?"default":"none")},setZoom:function(a){var d=b(this);h[d.attr("id")].set("zoomLevel",
a)},setType:function(a){var d=b(this),d=h[d.attr("id")];switch(a){case "map":a=d.NORMAL;break;case "satellite":a=d.SATELLITE;break;case "terrain":a=d.TERRAIN;break;default:a=d.NORMAL}d.set("baseMapType",a)}};b.fn.jOVI=function(a){var d=Array.prototype.slice.call(arguments,0);if(j[a])a=j[a],d=Array.prototype.slice.call(d,1);else if(typeof a=="object"||!a)a=j.init;else return b.error("Method "+a+" does not exist on jOVI"),this;return this.each(function(){a.apply(this,d)})}})(jQuery);
